const swstats_countries={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic Of",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory, Occupied",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"};(()=>{let a=document.getElementById("periodselect"),e=document.querySelectorAll(".swstats-dash .panels > div, #swstats-widget .panel"),t=Array(e.length).fill(null);Chart.defaults.font.family='-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif',Chart.defaults.font.size=11,Chart.defaults.plugins.legend.display=!1,Chart.defaults.color="rgba(255,255,255,.8)",Chart.defaults.maintainAspectRatio=!1,Chart.defaults.borderColor="rgba(255,255,255,.1)",Chart.defaults.elements.point.pointStyle=!1,Chart.defaults.elements.line.borderWidth=2,Chart.defaults.elements.line.borderCapStyle="round",Chart.defaults.elements.line.borderJoinStyle="round";let n={type:"line",options:{scales:{x:{border:{display:!1},grid:{display:!1},ticks:{maxRotation:0,minRotation:0,autoSkipPadding:15,padding:5},afterTickToLabelConversion:function(a){a.ticks[0].label="",a.ticks[a.ticks.length-1].label=""}},y:{border:{display:!1},beginAtZero:!0,grid:{drawTicks:!1},position:"right",ticks:{maxRotation:0,minRotation:0,precision:0,padding:-10,mirror:!0,z:10,callback:(a,e,t)=>0==a?"":s(a)}}}}};function i(a,e){return{labels:Object.keys(a.visits[e]),datasets:[{label:a.visitsLabel,data:a.visits[e],borderColor:"rgba(54, 162, 235, .8)",backgroundColor:"rgba(54, 162, 235, .8)"},{label:a.viewsLabel,data:a.views[e],borderColor:"rgba(150, 222, 150, .8)",backgroundColor:"rgba(150, 222, 150, .8)"}]}}function r(r){if(r.dataset.type&&r.dataset.nonce){let u=Array.prototype.indexOf.call(e,r),m=r.dataset.type,h="summary"===m,S=!!r.closest("#swstats-widget"),g=r.querySelector(".inner"),f=r.querySelector(".loading");if(g.classList.remove("show"),f.classList.add("show"),!h){r.querySelector(".nodata").classList.remove("show")}let y={nonce:r.dataset.nonce};y.period=S?"last24hours":a.value,h?(y.action="swstats_get_summary_data",y.isWidget=S):(y.action="swstats_get_table_data",y.dataType=m,y.viewID=r.dataset.viewid,y.numResults=10),t[u]&&"readyState"in t[u]&&t[u].readyState<4&&t[u].abort();let b=[];Object.keys(y).forEach((a=>b.push(encodeURIComponent(a)+"="+encodeURIComponent(y[a]))));let C=b.join("&");t[u]=new XMLHttpRequest,t[u].open("POST",p,!0),t[u].setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t[u].onload=function(){if(this.status>=200&&this.status<400){let a=!1;this.response&&(a=JSON.parse(this.response)),a.data&&a.newNonce?(r.dataset.nonce=a.newNonce,h?function(a,e,t){let r=!!a.closest("#swstats-widget"),u=a.querySelector(".inner");var p="";for(const[a,t]of Object.entries(e)){if(p+='<div class="'+a+'"><h3>'+t.label+"</h3><p>",null===t.value?p+="--":"number"==t.format?p+=s(t.value):"time"==t.format?p+=o(t.value):"percent"==t.format?p+=l(t.value,2):p+=t.value,null!==t.comparison){let e=d(t.value,t.comparison);null!==e&&(p+="bouncerate"==a?c(e,!0):c(e))}p+="</p></div>"}u.innerHTML=p;let m=document.createElement("div");m.classList.add("chart");const h=document.createElement("canvas");if(m.appendChild(h),!r&&Object.keys(t.granularities).length>1){let a=document.createElement("div");a.classList.add("granularity");for(const[e,n]of Object.entries(t.granularities)){let r=document.createElement("a");r.innerText=n,r.href="#",r.dataset.granularity=e,e==t.defaultGranularity&&r.classList.add("active"),r.addEventListener("click",(function(a){a.preventDefault(),S.data=i(t,this.dataset.granularity),S.update(),this.parentNode.querySelectorAll("a").forEach((a=>{a.classList.remove("active")})),this.classList.add("active")})),a.appendChild(r)}m.appendChild(a)}u.appendChild(m),n.data=i(t,t.defaultGranularity);const S=new Chart(h,n)}(r,a.data,a.chartdata):function(a,e,t,n){let i=a.dataset.type;if(a&&i&&e&&t){let o=a.querySelector(".table");o.replaceChildren();let l=a.querySelector(".nodata");if(0==t.length)return l.classList.add("show"),!1;l.classList.remove("show");var r=document.createElement("div");r.classList.add("row","head","cols"+e.length),e.forEach((a=>{var e=document.createElement("div");e.innerHTML=a,r.appendChild(e)})),o.appendChild(r),t.forEach((a=>{var t=document.createElement("div");if(t.classList.add("row","body","cols"+e.length),n){let e=Math.round(a[1]/n*1e3)/10;t.style.backgroundImage="linear-gradient(90deg, rgba(255,255,255,.1) "+e+"%, rgba(255,255,255,0) "+e+"%)"}a.forEach(((a,e)=>{var n=document.createElement("div");0==e&&"countries"==i&&(a=swstats_countries[a]?'<span class="fflag fflag-'+a+' ff-sm"></span>'+swstats_countries[a]:'<span class="fflag fflag-NONE ff-sm"></span>Unknown'),n.innerHTML=0==e?a:s(a),t.appendChild(n)})),o.appendChild(t)}))}}(r,a.headers,a.data,a.count),g.classList.add("show"),f.classList.remove("show")):console.log("Simple Webstats Error: "+a.error)}else console.log("Simple Webstats: Connection Error")},t[u].onerror=function(){console.log("Simple Webstats: Connection Error")},t[u].send(C)}}function s(a){return a>=1e8?parseFloat((a/1e6).toFixed(0))+"M":a>=1e6?parseFloat((a/1e6).toFixed(1))+"M":a>=1e5?parseFloat((a/1e3).toFixed(0))+"K":a>=1e3?parseFloat((a/1e3).toFixed(1))+"K":parseFloat((a/1).toFixed(2))}function o(a){a=Math.round(a);var e=Math.floor(a/60);return e>0&&(a-=60*e),e+"m "+String(a).padStart(2,"0")+"s"}function l(a,e){return parseFloat((100*a).toFixed(e))+"%"}function d(a,e){if(a=parseFloat(a),e=parseFloat(e),0==a||0==e)return null;return(a-e)/e}function c(a,e){a=parseFloat((100*a).toFixed(1)),!0!==e&&(e=!1);let t='<span class="comparison '+(!e&&a>=0||e&&a<=0?"green":"red")+'">';return a>=0&&(t+="+"),t+=a+"%</span>",t}let u=document.querySelector(".swstats-dash");if(u&&u.dataset.ajaxurl){var p=u.dataset.ajaxurl;e.forEach((a=>{r(a)})),a.addEventListener("change",(function(){e.forEach((a=>{r(a)}))})),document.querySelectorAll(".swstats-dash .data-panel .switches a").forEach((a=>{a.addEventListener("click",(function(e){e.preventDefault();let t=a.closest(".switches").querySelectorAll("a"),n=a.closest(".data-panel"),i=n.querySelector("h2");n.dataset.viewid=a.dataset.viewid,i.innerText=a.innerText,a.style.display="none",t.forEach((e=>{a.isEqualNode(e)||(e.style.display="inline-block")})),r(n)}))}))}let m=document.querySelector("#swstats-widget .panel");if(m&&m.dataset.ajaxurl){let a=document.querySelector("#swstats-widget .inside");a&&a.addEventListener("click",(function(a){a.preventDefault(),window.location="admin.php?page=swstats_dash"}));p=m.dataset.ajaxurl;e.forEach((a=>{r(a)}))}})();